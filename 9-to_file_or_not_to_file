#!/usr/bin/env bash
# 10-process_and_pid_file

PIDFILE="/var/run/myscript.pid"

cleanup_and_exit() {
  rm -f "$PIDFILE"
  exit 0
}

# Create PID file containing this script's PID
echo "$$" > "$PIDFILE"

# Traps:
# - SIGINT  -> print message, keep running
# - SIGTERM -> print message, then cleanup + exit
# - SIGQUIT -> cleanup + exit
trap 'echo "Y U no love me?!"' INT
trap 'echo "I hate the kill command"; cleanup_and_exit' TERM
trap 'cleanup_and_exit' QUIT

# Loop forever
while true; do
  echo "To infinity and beyond"
  sleep 2
done
